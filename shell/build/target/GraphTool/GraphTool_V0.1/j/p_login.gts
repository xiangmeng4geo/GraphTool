Core.safe(function(){function e(e){return i.encrypt(e,l.key)}function r(r,n,t){return t||(n=e(n)),r==l.name&&n==l.pwd}function n(e,r,n){if(e){var t=($(".initializing").show(),new Date),o=2e3;(r||function(){})();var i=Core.Page.main(),c=function(){var e=(new Date-t)/1e3;i.removeAllListeners(),setTimeout(function(){i.show(),i.focus(),a.close()},o-e)};i.once("inited",c)}else(n||function(){alert("您输入的用户和密码错误，请重新输入！")})()}var t=require("core"),o=t.conf,i=t.util,c=Core.Store,u=Core.Window,a=u.get();$("#btn_cancel").click(function(){a.close()});var s=$("#username"),f=$("#userpwd"),l=o.getVerification(),v=$("#cb_remember"),_=$("#cb_autologin"),g=c.get("user_is_remember",!1);v.prop("checked",g);var m=!1;if(g){var p=c.get("user_pwd");p&&(m=!0,f.on("change",function(){m=!1})),f.val(p)}var d=c.get("user_is_autologin",!1);if(_.prop("checked",d),d){var w=c.get("user_name"),p=c.get("user_pwd");if(w&&p)return n(r(w,p,!0))}a.show(),a.focus(),s.val(c.get("user_name")),Core.Window.onKeyEnter(function(){h.click()});var h=$("#btn_login").click(function(){var t=s.val();if(!t)return alert("请输入用户名!");var o=f.val();return o?void n(r(t,o,m),function(){c.set("user_name",t);var r=v.prop("checked");c.set("user_is_remember",r);var n=_.prop("checked");c.set("user_is_autologin",n),r?c.set("user_pwd",m?o:e(o)):c.rm("user_pwd")}):alert("请输入密码!")})});