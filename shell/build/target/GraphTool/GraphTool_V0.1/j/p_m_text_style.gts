Core.safe(function(){function o(o,t){return o&&o!=t}function t(){var o={};o["font-size"]=_.val()+"px",o.color=l.val(),o["background-color"]=i.prop("checked")?r.val():"transparent",o["font-weight"]=s.prop("checked")?"bold":"normal",o["font-style"]=p.prop("checked")?"italic":"normal";var e="";d.prop("checked")&&(e+="line-through"),f.prop("checked")&&(e+=" underline"),o["text-decoration"]=e||"none",a.removeAttr("style").css(o),setTimeout(t,100)}var e=Core.Const.msgType,c=$("#btn_font_color"),n=$("#btn_bg_color"),r=$("#input_bg_color").on("change",function(){n.css("background-color",$(this).val())}),l=$("#input_font_color").on("change",function(){c.css("color",$(this).val())}),a=$("#textarea_content"),i=$("#cb_is_bg_color"),s=$("#cb_font_weight"),p=$("#cb_font_italic"),d=$("#cb_text_through"),f=$("#cb_text_underline"),_=$("#input_font_size"),u=Core.Color.toHTML;Core.Window.onMessage(function(h){var v=h.data,k=v.type;if(e.CONF_STYLE==k){v=v.data;var g=v.style,b=v.text;if(b&&a.val(b),g){a.attr("style",g);var C={},y=g.split(/;\s*/);$.each(y,function(o,t){var e=t.split(/:\s+/);e[0]&&(C[e[0]]=e[1])});var x=parseFloat(C["font-size"]);x&&_.val(x);var m=C.color;m&&(m=u(m),l.val(m),c.css("color",m));var w=C["background-color"];o(w,"transparent")&&(w=u(w),i.prop("checked",!0),r.val(w),n.css("background-color",w)),o(C["font-weight"],"normal")&&s.prop("checked",!0),"italic"==C["font-style"]&&p.prop("checked",!0);var T=C["text-decoration"];if(o(T,"none")){var O=T.split(/\s+/);O.indexOf("underline")>-1&&f.prop("checked",!0),O.indexOf("line-through")>-1&&d.prop("checked",!0)}}}t()}),c.click(function(){l.click()}),n.click(function(){r.click()});var h=$("#btn_cancel").click(Core.Window.close);$("#btn_yes").click(function(){Core.Window.sendMsg(Core.Const.msgType.CONF_STYLE,{text:a.val(),style:a.attr("style")},opener),h.click()})});